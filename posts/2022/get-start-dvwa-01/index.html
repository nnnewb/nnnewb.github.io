<!doctype html><html lang=zh><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><meta content="index, follow" name=robots><title>DVWA上手记录-初体验</title><meta content=DVWA上手记录-初体验 name=title><meta content=一点点从这个世界上消失。 name=description><meta content=website property=og:type><meta content=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/ property=og:url><meta content="weakptr's blog" property=og:site_name><meta content=DVWA上手记录-初体验 property=og:title><meta content=一点点从这个世界上消失。 property=og:description><meta content=https://nnnewb.github.io/image/favicon.ico property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/ property=twitter:url><meta content=DVWA上手记录-初体验 property=twitter:title><meta content=一点点从这个世界上消失。 property=twitter:description><meta content=https://nnnewb.github.io/image/favicon.ico property=twitter:image><link href=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/ rel=canonical><link rel="shortcut icon" href=https://nnnewb.github.io/image/favicon.ico type=image/x-icon><link href=https://nnnewb.github.io/css/reset.css rel=stylesheet><link href=https://nnnewb.github.io/css/pallete.css rel=stylesheet><link href=https://nnnewb.github.io/css/suCSS.css rel=stylesheet><link href=https://nnnewb.github.io/archive.css rel=stylesheet><link href=https://nnnewb.github.io/style.css rel=stylesheet><script defer src=https://nnnewb.github.io/js/script.js></script><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y rel=stylesheet><script crossorigin defer integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js></script><script crossorigin defer integrity=sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js></script><script crossorigin defer integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            // customised options
            // • auto-render specific keys, e.g.:
            delimiters: [
                { left: '$$', right: '$$', display: true },
                { left: '$', right: '$', display: false },
                { left: '\\(', right: '\\)', display: false },
                { left: '\\[', right: '\\]', display: false }
            ],
            // • rendering keys, e.g.:
            throwOnError: true
        });
    });</script><script src=https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.min.js></script><script>document.addEventListener('DOMContentLoaded', function () {
        // 查找所有具有 'pre' 标签且类名为 'language-mermaid' 的元素
        const mermaidElements = document.getElementsByClassName('language-mermaid');
        for (let i = 0; i < mermaidElements.length; i++) {
            const el = mermaidElements.item(i);
            if (el.tagName === "PRE" && !el.classList.contains('mermaid')) {
                el.innerHTML = el.textContent;
                el.classList.add('mermaid');
            }
        }

        mermaid.initialize({ startOnLoad: true, theme: 'dark', });
    })</script><script>if (window.location.hostname.toLowerCase() !== 'localhost' && window.location.hostname !== '127.0.0.1') {
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?dbb9df33a2de52aede8bccd84a7493ad";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    }</script><link href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Medium/result.css rel=stylesheet><link href=https://chinese-fonts-cdn.deno.dev/packages/maple-mono-cn/dist/MapleMono-CN-Regular/result.css rel=stylesheet><body><header><nav id=nav-bar><a href=/> 首页 </a>  /  <a href=/posts/> 文章 </a>  /  <a href=/categories/> 分类 </a>  /  <a href=/tags/> 标签 </a>  /  <a href=/search/> 搜索 </a>  /  <div><input id=theme-toggle style=display:none type=checkbox><label for=theme-toggle id=theme-toggle-label><svg class=icons id=theme-icon><use href=https://nnnewb.github.io/icons.svg#lightMode></use></svg></label><audio id=theme-sound><source src=https://nnnewb.github.io/click.ogg type=audio/ogg></audio></div></nav></header><main><h1>DVWA上手记录-初体验</h1><p class=author-line>作于：2022-04-21 16:41 ，预计阅读时间 8 分钟<article><h2 id=qian-yan>前言</h2><p>DVWA 全程 <em>Damn Vunerable Web Application</em> ，是一个开源的基于 PHP+MariaDB 开发的漏洞靶场。<p>官方文档推荐XAMPP部署，但个人比较爱docker，先拿 README 里写的 vulnerables/web-dvwa 玩玩看。<blockquote><p>vulnerable/web-dvwa 这个容器最后一次更新已经是 2015 年了，作为纯萌新姑且先把玩看看，安全领域攻防发展这么快，我寻思这个版本是有点和时代脱节了。</blockquote><h2 id=an-zhuang>安装</h2><p>启动个虚拟机，debian bullseye，装好 docker 再配好 zsh 之类的工具。tmux 开个分窗然后一键跑起来：<code>docker run --rm -it -p 80:80 vulerables/web-dvwa</code>。<p>配置下虚拟机端口转发，把 SSH 和 HTTP 转发到宿主机：<p><img alt=image-20220421144541945 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421144541945.webp><p>最后在浏览器打开 <code>http://localhost:8080/</code> 就能看到登录页了。在创建数据库前随便输入什么用户名密码都能进去，简单读一下<code>/setup.php</code> 上写的内容，点一下 <code>Create/Reset database</code>。<p><img alt=image-20220421151455045 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421151455045.webp><p>等跳转回登录页，就算是完成了。<p><img alt=image-20220421151523317 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421151523317.webp><p>默认账号密码是 <code>admin</code> 和 <code>password</code> 。<h2 id=xin-xi-shou-ji>信息收集</h2><h3 id=jie-shao>介绍</h3><p>在侧边栏可以看到可用的模块。<p><img alt=image-20220421152621120 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421152621120.webp><p>具体内容稍后再看，先把主页上的信息读一读。<p>介绍中这样说：<blockquote><p>It is up to the user how they approach DVWA. Either by working through every module at a fixed level, or selecting any module and working up to reach the highest level they can before moving onto the next one. There is not a fixed object to complete a module; however users should feel that they have successfully exploited the system as best as they possible could by using that particular vulnerability.</blockquote><p>用户自己决定怎么玩这个靶场，没有固定目标。可以先把一个模块从低难度到高难度全打通再继续下一个，也可以低难度把所有模块打通再提高难度再来一轮。<blockquote><p>Please note, there are <em>both documented and undocumented vulnerability</em> with this software. This is intentional. You are encouraged to try and discover as many issues as possible.</blockquote><p>并且还提到有意存在未文档化的漏洞，也就是攻破一个模块的方法并不局限于帮助文档里的方法，完全可能自己挖掘出别的问题。<blockquote><p>DVWA also includes a Web Application Firewall (WAF), PHPIDS, which can be enabled at any stage to further increase the difficulty.</blockquote><p>DVWA 还包含了 WAF，可以自己开启或者关闭。开启等于是给自己提高了难度。<h3 id=php-info>PHP info</h3><p>侧边栏下方有个 PHP Info 链接，点开看一眼，就是个经典的 phpinfo 页。<p>php 版本是 7.0.30-0+deb9u1，应该是 debian 打包的版本。<p>Apache 版本 2.4.25，Debian 打包的版本。<p>其他半懂不懂的全部略，就当没看见。<p>之后有需要再来看。<h3 id=guan-yu>关于</h3><p>在 About 页里提到发行时间是 2015-10-08，确实很老了。<p>里面还有些相关链接和资源、文档，把 dvwa 的官网主页加入收藏夹后剩下的内容暂且不管。<h3 id=dvwa-security>DVWA security</h3><p>安全配置页，显示当前的 DVWA 运行在哪个安全级别（就是前文介绍中提到的 <strong>难度</strong>）。<p><img alt=image-20220421154901935 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421154901935.webp><p>注意到页面这几个位置都有标注当前安全配置，在这个页面可以修改安全级别和 WAF （图中 PHPIDS）的开启状态。<h3 id=setup-reset-db>Setup/Reset DB</h3><p>这个页面就是最初启动 DVWA 的时候初始化数据库的页面，可以在这个页面里重置数据库，也能在这个页面看到一些自检信息。<p><img alt=image-20220421155109454 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421155109454.webp><p><code>allow_url_include</code>暂时不管，等玩到那个模块的时候再看情况。<p><code>reCAPTCHA key</code> 是验证码模块需要的，等玩到的时候再找下怎么配。<p>最下面的 <code>Create / Reset Database</code> 的按钮就是重置数据库了。对于用 <code>docker --rm</code> 启动的我来说直接重启下容器清理地更干净，预计不会怎么用到这个功能。<h3 id=mo-kuai-su-lan>模块速览</h3><h4 id=brute-force>Brute Force</h4><p><img alt=image-20220421155923710 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421155923710.webp><p>一般说 Brute Force 的时候就是暴力破解了，”跑字典“啊什么的。遍历可能存在的的弱密码。<h4 id=command-injection>Command Injection</h4><p><img alt=image-20220421160341139 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421160341139.webp><p>命令注入，相当经典的一个 ping，应该看一眼就知道指的什么了。<h4 id=csrf>CSRF</h4><p><img alt=image-20220421160436952 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421160436952.webp><p>跨站请求伪造，有点摸不着头脑。emm，难道是说这个页面没有考虑 csrf （可能还有cors？），所以能在别的站直接发个 xhr 实现修改密码？<h4 id=file-inclusion>File Inclusion</h4><p><img alt=image-20220421160749753 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421160749753.webp><p>没思路。虽然看过 p 大博客信手拈来的文件包含利用，但对着这个页面暂时还是想不出要干啥。<blockquote><p>PS：刚发现地址栏有点意思<p><img alt=image-20220421160947316 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421160947316.webp></blockquote><h4 id=file-upload>File Upload</h4><p><img alt=image-20220421161006745 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161006745.webp><p>可能是任意文件上传相关的洞？<h4 id=insecure-captcha>Insecure CAPTCHA</h4><p><img alt=image-20220421161050749 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161050749.webp><p>看标题还是有点意思的，不安全的验证码指的是可以绕过验证码么？<h4 id=sql-injection>SQL Injection</h4><p><img alt=image-20220421161127372 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161127372.webp><p>经典SQL注入。<h4 id=sql-injection-blind>SQL Injection (Blind)</h4><p>和上面一样，不过是盲注。<h4 id=weak-session-ids>Weak Session IDs</h4><p><img alt=image-20220421161207944 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161207944.webp><p>对 PHP 还不够了解，不知道 <code>Weak Session IDs</code> 指的是什么。可能和 Cookie 里的 <code>PHPSESSID</code> 有关系？<h4 id=xss-dom>XSS (DOM)</h4><p>见下。<h4 id=xss-reflected>XSS(Reflected)</h4><p>见下。<h4 id=xss-stored>XSS(Stored)</h4><p>三类 XSS ，页面分别如下。<p><img alt=XSS(DOM) src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161441348.webp><p><img alt=XSS(reflected) src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161450360.webp><p><img alt=XSS(Stored) src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161457946.webp><p>除了 DOM 型看页面没有思路，另外两个看注入点还是清楚的。<h4 id=csp-bypass>CSP Bypass</h4><p><img alt=image-20220421161626897 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161626897.webp><p>不了解 CSP，没头绪。<h4 id=javascript>JavaScript</h4><p><img alt=image-20220421161759960 src=https://nnnewb.github.io/posts/2022/get-start-dvwa-01/image-20220421161759960.webp><p>有点摸不着头脑，指的是在前端用 JS 检查表单不安全？<p>看链接里的 <code>es6-proxies-in-depth</code> 感觉是个绕过前端保护的题。<h2 id=chu-ti-yan-zong-jie>初体验总结</h2><p>姑且算是把 DVWA 这个靶场在手里把玩了一下，初步看了看怎么玩、有什么可玩。<p>接下来考虑是一题一题难度从低到高慢慢刷过去，实在干不过再跳。</article><p class=tags-data><a href=/tags/security>/security/</a> <a href=/tags/dvwa>/DVWA/</a></p><script data-repo-id="MDEwOlJlcG9zaXRvcnkzOTg0ODYyMTg=" async crossorigin data-category=Announcements data-category-id=DIC_kwDOF8Bqys4Cegmn data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-mapping=pathname data-reactions-enabled=1 data-repo=nnnewb/nnnewb.github.io data-strict=0 data-theme=noborder_light id=giscus_script src=https://giscus.app/client.js></script></main><footer><hr><div id=footer-container><div><p style=text-align:center>Copyright © 2018-2024 weakptr <a href=mailto:weak_ptr@outlook.com>&lt;weak_ptr@outlook.com></a><p style=text-align:center>Built with <a rel="noopener noreferrer" href=https://www.getzola.org target=_blank>Zola</a> using <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> theme, <a rel="noopener noreferrer" href=https://speyll.github.io/suCSS/ target=_blank>suCSS</a> framework & <a rel="noopener noreferrer" href=https://github.com/Speyll/veqev target=_blank>veqev</a>, modified by <a rel="noopener noreferrer" href=https://github.com/nnnewb/ target=_blank>nnnewb</a>.<p style=text-align:center>Theme and color theme licensed under <a rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/Licence_MIT target=_blank>MIT</a>.</div></div></footer>